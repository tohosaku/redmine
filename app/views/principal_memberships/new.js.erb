<% html = remote_modal_dialog(width: '700px', title: l(:label_add_projects), partial: 'principal_memberships/new_modal') %>
$('#ajax-modal').html('<%= escape_javascript(render :partial => 'principal_memberships/new_modal') %>');

$('.projects-selection').on('click', 'input[type=checkbox]', function(e){
  if (!$(this).is(':checked')) {
    if ($(this).closest('li').find('ul input[type=checkbox]:not(:checked)').length > 0) {
      $(this).closest('li').find('ul input[type=checkbox]:not(:checked)').attr('checked', 'checked');
      e.preventDefault();
    } else {
      $(this).closest('li').find('ul input[type=checkbox]:checked').removeAttr('checked');
    }
  }
});
