<% members_to_highlight = @members.present? && @members.all? {|m| m.valid? } ? @members.map{|m| m.id} : [] %>
$('#tab-content-members').html('<%= escape_javascript(render :partial => 'projects/settings/members', :locals => {:members_to_highlight => members_to_highlight}) %>');
hideOnLoad();

<% if members_to_highlight.size > 0 %>
  $('#ajax-modal').append('<template data-modal-dispatcher-target="hide"></template>')
<% elsif @members.present? %>
  <% errors = @members.collect {|m| m.errors.full_messages}.flatten.uniq.join(', ') %>
  alert('<%= raw(escape_javascript(l(:notice_failed_to_save_members, :errors => errors))) %>');
<% end %>
